<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Make the PUT and POST request necessary to upload and optionally publish
a file to Zenodo."><title>Upload and optionally publish data to Zenodo — depositZenodo • AnnotationGx</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Upload and optionally publish data to Zenodo — depositZenodo"><meta property="og:description" content="Make the PUT and POST request necessary to upload and optionally publish
a file to Zenodo."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AnnotationGx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ChEMBLAPIQueries.html">Querying ChEMBL with AnnotationGx</a>
    <a class="dropdown-item" href="../articles/PubChemAPIQueries.html">Querying PubChem with AnnotationGx</a>
    <a class="dropdown-item" href="../articles/UniChemAPIQueries.html">Querying UniChem with AnnotationGx</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Upload and optionally publish data to Zenodo</h1>
      
      <div class="d-none name"><code>depositZenodo.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Make the PUT and POST request necessary to upload and optionally publish
a file to Zenodo.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">depositZenodo</span><span class="op">(</span></span>
<span>  <span class="va">file_path</span>,</span>
<span>  metadata <span class="op">=</span> <span class="fu"><a href="zenodoMetadata.html">zenodoMetadata</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  publish <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  url <span class="op">=</span> <span class="st">"https://zenodo.org/api/deposit/depositions"</span>,</span>
<span>  access_token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ZENODO_TOKEN"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>file_path</dt>
<dd><p><code>character(1)</code> Path to the file to upload to Zenodo.</p></dd>


<dt>metadata</dt>
<dd><p><code>list</code> Named list of metadata required to publish publish
a Zenodo entry, as returned by the <code>zenodoMetadata</code> function. See
<code><a href="zenodoMetadata.html">?zenodoMetadata</a></code> for documentation of the correct format.</p></dd>


<dt>publish</dt>
<dd><p><code>logical(1)</code> Should the Zenodo entry be published, assuming
the upload succeeds? Default is <code>FALSE</code>.</p></dd>


<dt>...</dt>
<dd><p>Fall through parameters to the <code><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">httr::POST</a></code> and <code><a href="https://httr.r-lib.org/reference/PUT.html" class="external-link">httr::PUT</a></code>
method calls inside this function. Pass <code><a href="https://httr.r-lib.org/reference/verbose.html" class="external-link">httr::verbose()</a></code> to get detailed
information about your API requests, useful for debugging.</p></dd>


<dt>url</dt>
<dd><p><code>character(1)</code> URL string for the API. Do not change unless you
know what you are doing.</p></dd>


<dt>access_token</dt>
<dd><p><code>character(1)</code> Zenodo access token. By deafult tries to
read this from the ZENODO_TOKEN environmet variable via <code>Sys.getenv</code>.
See details for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If all HTTP requests succeed, returns the details of the Zenodo entry
as a list invisiblty. If any of the requests fail, it returns the failed
request object for ease of debugging.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<div class="section">
<h3 id="caveats">Caveats<a class="anchor" aria-label="anchor" href="#caveats"></a></h3>


<p>This function is an early prototype and is not very polished. The current
version will create a new entry everytime the function is called, even
if some of the steps succeeded. For now, you will need to manually delete
these entries from you Zenodo account. However, this will be corrected in
future updates.</p>
</div>

<div class="section">
<h3 id="access-token"><code>access_token</code><a class="anchor" aria-label="anchor" href="#access-token"></a></h3>


<p>API documentation is available at https://developers.zenodo.org/.</p>
<p>To use this function you need a Zenodo access token for your account. A link
is available in the API documentation to create one. It is assumed you have
added the access token to your operating system environment in the
ZENODO_TOKEN variable.</p>
<p>If you have not, you can specify an access token. For this function to
work the token needs to provide both upload and publish permissions on your
Zenodo account.</p>
</div>

<div class="section">
<h3 id="trouble-shooting">Trouble Shooting<a class="anchor" aria-label="anchor" href="#trouble-shooting"></a></h3>

<ul><li><p><em>405 Errors</em>: Ensure that you have verified your Zenodo account email.</p></li>
<li><p><em>403 Errors</em>: Ensure you have checked both the <code>publish:actions</code> and
<code>publish:write</code> boxes for your Zenodo access token.</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">httr::POST</a>, <a href="https://httr.r-lib.org/reference/upload_file.html" class="external-link">httr::upload_file</a></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Christopher Eeles, Sisira Nair, Petr Smirnov, Shahzada Farooq, Benjamin Haibe-Kains.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

